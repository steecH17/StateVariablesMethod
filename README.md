# Моделирование электрических схем методом переменных состояния

## Описание проекта

Данный проект представляет собой программную реализацию метода переменных состояния для анализа и моделирования электрических схем. Программа позволяет строить уравнения состояния электрической цепи, решать их численными методами и визуализировать результаты.

## Формат входных данных

### Структура файла схемы

Создайте текстовый файл в папке `InputData` со следующим форматом:
Имя Тип Значение Узел1 Узел2

### Пример файла схемы (circuit1.txt):
C1 C 1e-6 1 0
L1 L 0.001 1 2
R1 R 1000 2 0
R2 R 2000 1 0
J1 J 0.001 0 2


### Поддерживаемые типы компонентов:

- **Резисторы**: `R` или `Resistor`
- **Конденсаторы**: `C` или `Capacitor`
- **Индуктивности**: `L` или `Inductor`
- **Источники напряжения**: `V`, `VoltageSource` или `VS`
- **Источники тока**: `I`, `CurrentSource`, `CS` или `J`

### Правила оформления:

- Каждый компонент на отдельной строке
- Разделитель - пробел или табуляция
- Комментарии начинаются с `//`
- Значения могут быть в экспоненциальной форме (1e-6, 0.001)
- Узлы нумеруются целыми числами (узел 0 - земля)

## Запуск программы

1. Поместите файл схемы в папку `InputData`
2. Запустите программу
3. Введите имя файла при запросе (например: `circuit1.txt`)
4. Программа выполнит моделирование и сохранит графики в папку `plots`

## Описание классов

### Основные классы:

- **`CircuitSimulator`** - главный класс, управляющий процессом моделирования
- **`CircuitComponent`** - представляет компонент схемы (резистор, конденсатор и т.д.)
- **`DirectedGraph`** - строит ориентированный граф схемы и выделяет дерево
- **`MMatrix`** - строит M-матрицу контуров и сечений
- **`StateSpaceBuilder`** - формирует систему уравнений состояния
- **`StateSpaceSystem`** - содержит матрицы A, B, C, D системы
- **`TopologyAnalyzer`** - анализирует топологию схемы и определяет коэффициенты

### Вспомогательные классы:

- **`CircuitReader`** - читает описание схемы из файла
- **`GraphPlotter`** - строит графики результатов с использованием ScottPlot
- **`SimulationResult`** - хранит результаты моделирования
- **`VoltageEquation`, `CurrentEquation`** - представляют уравнения KVL и KCL

## Алгоритм работы

1. **Чтение схемы** - загрузка компонентов из файла
2. **Построение графа** - создание ориентированного графа и выделение дерева
3. **Формирование M-матрицы** - построение матрицы контуров и сечений
4. **Анализ топологии** - определение типа цепи и параметров моделирования
5. **Построение уравнений** - формирование системы уравнений состояния
6. **Решение уравнений** - численное интегрирование методом Эйлера
7. **Визуализация** - построение графиков токов и напряжений

## Выходные данные

Программа генерирует:
- Подробный вывод уравнений KVL и KCL
- Матрицы системы уравнений состояния
- Таблицу результатов моделирования
- Графики в формате PNG в папке `plots`:
  - Ток через резистор R2 (i2)
  - Ток через источник тока (i3)
  - Переменные состояния (u_C, i_L)

## Требования

- .NET 9.0
- Библиотека ScottPlot для построения графиков
